function ddds(){var valueOrigin=document.getElementById('orig').value;var valueDestination=document.getElementById('dest').value;var valueTime=document.getElementById('valueTime').value;if(checkInputs(valueOrigin,valueDestination,valueTime)){prepareCalculation()}}function time(){var valueOrigin=document.getElementById('orig').value;var valueDestination=document.getElementById('dest').value;var valueTime=document.getElementById('valueTime').value;if(checkInputs(valueOrigin,valueDestination,valueTime)){prepareCalculation()}}function checkCombination(valueOrigin=0,valueDestination=0){var result=false;if(parseInt(valueOrigin)==16&&parseInt(valueDestination)==11){result=true}if(parseInt(valueOrigin)==11&&parseInt(valueDestination)==16){result=true}if(parseInt(valueOrigin)==11&&parseInt(valueDestination)==17){result=true}if(parseInt(valueOrigin)==17&&parseInt(valueDestination)==11){result=true}if(parseInt(valueOrigin)==11&&parseInt(valueDestination)==18){result=true}if(parseInt(valueOrigin)==18&&parseInt(valueDestination)==11){result=true}return result}function resetInputs(){document.getElementById('plan0').value='';document.getElementById('plan30').value='';document.getElementById('plan60').value='';document.getElementById('plan120').value=''}function checkInputs(valueOrigin=0,valueDestination=0,valueTime=0){if(parseInt(valueOrigin)<=0||parseInt(valueDestination)<=0||isNaN(parseInt(document.getElementById('valueTime').value))){return false}if(valueTime<=0){document.getElementById('errorMsg').innerHTML='Tempo deve ser maior que zero.';document.getElementById("errorMsg").style.display='block';resetInputs();return false}else{document.getElementById("errorMsg").style.display='none'}if(checkCombination(valueOrigin,valueDestination)){document.getElementById('errorMsg').style.display='none';return true}else{document.getElementById('errorMsg').innerHTML='Combinação inexistente.';document.getElementById('errorMsg').style.display='block';resetInputs()}return false}function prepareCalculation(){var valueOrigin=parseInt(document.getElementById('orig').value);var valueDestination=parseInt(document.getElementById('dest').value);var valueTime=parseInt(document.getElementById('valueTime').value);$.getJSON('http://private-fe2a-scuptel.apiary-mock.com/ddd/pricing',function(dataPrices){for(var key in dataPrices.data){if(valueOrigin==11&&valueDestination==16){if(dataPrices.data[key].origin==11&&dataPrices.data[key].destiny==16){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}if(valueOrigin==16&&valueDestination==11){if(dataPrices.data[key].origin==16&&dataPrices.data[key].destiny==11){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}if(valueOrigin==11&&valueDestination==17){if(dataPrices.data[key].origin==11&&dataPrices.data[key].destiny==17){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}if(valueOrigin==17&&valueDestination==11){if(dataPrices.data[key].origin==17&&dataPrices.data[key].destiny==11){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}if(valueOrigin==11&&valueDestination==18){if(dataPrices.data[key].origin==11&&dataPrices.data[key].destiny==18){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}if(valueOrigin==18&&valueDestination==11){if(dataPrices.data[key].origin==18&&dataPrices.data[key].destiny==11){showCalculation(parseFloat(dataPrices.data[key].price),valueTime);break}}}}).fail(function(){alert('Temos um problema interno. Por favor tente realizar a simulação novamente mais tarde. Desculpe o transtorno.')})}function showCalculation(price=0,valueTime=0){if(valueTime>30&&valueTime<=60){document.getElementById('plan30').value=calculation(valueTime,price,30)}if(valueTime>60&&valueTime<=120){document.getElementById('plan30').value=calculation(valueTime,price,30);document.getElementById('plan60').value=calculation(valueTime,price,60)}if(valueTime>120){document.getElementById('plan30').value=calculation(valueTime,price,30);document.getElementById('plan60').value=calculation(valueTime,price,60);document.getElementById('plan120').value=calculation(valueTime,price,120)}document.getElementById('plan0').value=calculation(valueTime,price,0)}function calculation(valueTime=0,price=0,typePlan){var result=0;var priceExcess=0;priceExcess=(price*10)/100;priceExcess=parseFloat(price+priceExcess);if(typePlan>0){result=maskValue(parseFloat((valueTime-typePlan)*priceExcess).toFixed(2))}else{result=maskValue(parseFloat(valueTime*price).toFixed(2))}return result}function maskValue(valor){valor=valor.toString().replace(/\D/g,"");valor=valor.toString().replace(/(\d)(\d{8})$/,"$1.$2");valor=valor.toString().replace(/(\d)(\d{5})$/,"$1.$2");valor=valor.toString().replace(/(\d)(\d{2})$/,"$1,$2");return valor}